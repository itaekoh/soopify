# Supabase í”„ë¡œì íŠ¸ ì´ë¦„ ë³€ê²½ ì˜í–¥ ë¶„ì„

## ðŸŽ¯ ë³€ê²½ ê³„íš

```
í˜„ìž¬ â†’ ë³€ê²½ í›„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docnamu DB  â†’ soopify DB   (í†µí•© í”Œëž«í¼ìš©)
soopify DB  â†’ soopnote DB  (ë…¸íŠ¸ì•± ì „ìš©)
```

---

## âš ï¸ Supabase í”„ë¡œì íŠ¸ ì´ë¦„ ë³€ê²½ì˜ í˜„ì‹¤

### ðŸš¨ ì¤‘ìš”: SupabaseëŠ” í”„ë¡œì íŠ¸ URL ë³€ê²½ ë¶ˆê°€ëŠ¥!

Supabaseì˜ ì œì•½ì‚¬í•­:
```
í”„ë¡œì íŠ¸ ìƒì„± ì‹œ:
https://[í”„ë¡œì íŠ¸ID].supabase.co
                â†‘
            ì´ IDëŠ” ì˜êµ¬ì !
            ë³€ê²½ ë¶ˆê°€ëŠ¥!
```

**ì¦‰:**
- `docnamu.supabase.co` â†’ URL ì˜êµ¬ ê³ ì •
- `soopify.supabase.co` â†’ URL ì˜êµ¬ ê³ ì •
- **í”„ë¡œì íŠ¸ URLì„ ë°”ê¿€ ìˆ˜ ì—†ìŒ!**

---

## ðŸ“Š ë³€ê²½ ë°©ë²• ë¹„êµ

### ì˜µì…˜ 1: Display Nameë§Œ ë³€ê²½ â­ ê¶Œìž¥
**ê°€ëŠ¥í•œ ê²ƒ:**
- Supabase ëŒ€ì‹œë³´ë“œì˜ í‘œì‹œ ì´ë¦„ë§Œ ë³€ê²½
- `docnamu` â†’ `Soopify (Main DB)` í‘œì‹œ
- URLê³¼ APIëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€

**ì˜í–¥:**
- âœ… **ì½”ë“œ ìˆ˜ì •: 0%** - ì•„ë¬´ê²ƒë„ ì•ˆ ë°”ë€œ
- âœ… í™˜ê²½ë³€ìˆ˜ ë³€ê²½ ì—†ìŒ
- âœ… API í‚¤ ë³€ê²½ ì—†ìŒ
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥
- âŒ URLì€ ì—¬ì „ížˆ `docnamu.supabase.co`

```bash
# .env.local - ë³€ê²½ ì—†ìŒ!
NEXT_PUBLIC_SUPABASE_URL=https://docnamu.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...  # ê·¸ëŒ€ë¡œ
```

---

### ì˜µì…˜ 2: ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± + ë§ˆì´ê·¸ë ˆì´ì…˜ âŒ ë¹„ì¶”ì²œ
**ë°©ë²•:**
1. ìƒˆ í”„ë¡œì íŠ¸ `soopify` ìƒì„±
2. ëª¨ë“  ë°ì´í„°/í…Œì´ë¸” ë§ˆì´ê·¸ë ˆì´ì…˜
3. ëª¨ë“  ì½”ë“œ í™˜ê²½ë³€ìˆ˜ ë³€ê²½

**ì˜í–¥:**
- âŒ **ì½”ë“œ ìˆ˜ì •: 100%** - ëª¨ë“  í™˜ê²½ë³€ìˆ˜ ë³€ê²½
- âŒ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ë³µìž¡
- âŒ API í‚¤ ì „ë¶€ ìƒˆë¡œ ë°œê¸‰
- âŒ Vercel/ëª¨ë“  ë°°í¬ í™˜ê²½ ì—…ë°ì´íŠ¸
- âŒ RLS ì •ì±… ìž¬ì„¤ì •
- âŒ Storage ë²„í‚· ìž¬ì„¤ì •
- âŒ Edge Functions ìž¬ë°°í¬
- âŒ **ì†Œìš” ì‹œê°„: 2-3ì¼**
- ðŸ’° ë¹„ìš© 2ë°° (ê¸°ì¡´ + ì‹ ê·œ ë™ì‹œ ìœ ì§€)

---

### ì˜µì…˜ 3: ê·¸ëƒ¥ ë‚´ë¶€ ìš©ë„ë§Œ ëª…í™•ížˆ â­â­ ìµœê³  ê¶Œìž¥!
**ì „ëžµ:**
- DB í”„ë¡œì íŠ¸ URL/ì´ë¦„ì€ ê·¸ëŒ€ë¡œ
- ì½”ë“œì™€ ë¬¸ì„œì—ì„œë§Œ ëª…í™•ížˆ êµ¬ë¶„
- ì‹¤ìš©ì  ì ‘ê·¼

**ëª…ëª… ê·œì¹™:**
```javascript
// lib/supabase.ts

// docnamu DB (ì‹¤ì œë¡  í†µí•© ë©”ì¸ DB)
export const mainDb = createClient(
  process.env.NEXT_PUBLIC_MAIN_DB_URL!,  // docnamu.supabase.co
  process.env.NEXT_PUBLIC_MAIN_DB_ANON_KEY!
)

// soopify DB (ì‹¤ì œë¡  soopnote ì „ìš© DB)
export const noteDb = createClient(
  process.env.NEXT_PUBLIC_NOTE_DB_URL!,  // soopify.supabase.co
  process.env.NEXT_PUBLIC_NOTE_DB_ANON_KEY!
)
```

**.env.local (ëª…í™•í•œ ì£¼ì„)**
```bash
# ========================================
# ë©”ì¸ í†µí•© DB (docnamu í”„ë¡œì íŠ¸ í™œìš©)
# soopify.com í†µí•© í”Œëž«í¼ìš©
# ========================================
NEXT_PUBLIC_MAIN_DB_URL=https://docnamu.supabase.co
NEXT_PUBLIC_MAIN_DB_ANON_KEY=eyJ...
MAIN_DB_SERVICE_ROLE_KEY=eyJ...

# ========================================
# ë…¸íŠ¸ ì „ìš© DB (soopify í”„ë¡œì íŠ¸ í™œìš©)
# soopnote.com ì „ìš©
# ========================================
NEXT_PUBLIC_NOTE_DB_URL=https://soopify.supabase.co
NEXT_PUBLIC_NOTE_DB_ANON_KEY=eyJ...
NOTE_DB_SERVICE_ROLE_KEY=eyJ...
```

**ì˜í–¥:**
- âœ… **ì½”ë“œ ìˆ˜ì •: 5%** - ë³€ìˆ˜ëª…ë§Œ ëª…í™•í•˜ê²Œ
- âœ… ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì—†ìŒ
- âœ… API í‚¤ ë³€ê²½ ì—†ìŒ
- âœ… ì¦‰ì‹œ ì ìš© ê°€ëŠ¥
- âœ… **ì†Œìš” ì‹œê°„: 1ì‹œê°„**
- âœ… ë¹„ìš© ì¶”ê°€ ì—†ìŒ
- âœ… ë¡¤ë°± ì‰¬ì›€

---

## ðŸŽ¯ ìµœì¢… ê¶Œìž¥: ì˜µì…˜ 3

### ì´ìœ 

#### 1. **ì‹¤ìš©ì„±**
- Supabase URLì€ ì–´ì°¨í”¼ ì‚¬ìš©ìžì—ê²Œ ë…¸ì¶œ ì•ˆ ë¨
- ë‚´ë¶€ì ìœ¼ë¡œ ìš©ë„ë§Œ ëª…í™•í•˜ë©´ ë¨
- í”„ë¡œì íŠ¸ ì´ë¦„ë³´ë‹¤ **ê¸°ëŠ¥**ì´ ì¤‘ìš”

#### 2. **ë¦¬ìŠ¤í¬ ìµœì†Œí™”**
- ë°ì´í„° ì†ì‹¤ ìœ„í—˜ 0%
- ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨ ìœ„í—˜ 0%
- ë‹¤ìš´íƒ€ìž„ 0%

#### 3. **íš¨ìœ¨ì„±**
- ê°œë°œ ì‹œê°„ ì ˆì•½
- í…ŒìŠ¤íŠ¸ ì‹œê°„ ì ˆì•½
- ì¦‰ì‹œ ì‹¤ ìž‘ì—… ê°€ëŠ¥

#### 4. **ìœ ì§€ë³´ìˆ˜**
- í™˜ê²½ë³€ìˆ˜ ëª…í™•í•œ ì£¼ì„
- ì½”ë“œì—ì„œ `mainDb`, `noteDb`ë¡œ êµ¬ë¶„
- ë¯¸ëž˜ ê°œë°œìžë„ ì´í•´ ì‰¬ì›€

---

## ðŸ“ êµ¬í˜„ ë°©ë²• (ì˜µì…˜ 3)

### 1ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ì •ë¦¬ (5ë¶„)

```bash
# .env.local
# ==============================================
# Soopify í†µí•© í”Œëž«í¼ - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤
# (ì›ëž˜ docnamu DBë¥¼ í†µí•© í”Œëž«í¼ìš©ìœ¼ë¡œ í™œìš©)
# - ì»¤ë®¤ë‹ˆí‹° (í† ë¡ , Q&A)
# - ì „êµ­ í˜„í™© (ë‚˜ë¬´ë³‘ì›, ë³´í˜¸ìˆ˜)
# - ë¹„ì¦ˆë‹ˆìŠ¤ (ê³µì§€ì‚¬í•­, ë¬¸ì˜)
# ==============================================
NEXT_PUBLIC_SUPABASE_URL=https://[docnamu-project].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# ==============================================
# SoopNote ì „ìš© ë°ì´í„°ë² ì´ìŠ¤
# (soopnote.com ë…ë¦½ ì„œë¹„ìŠ¤)
# - sn_* í…Œì´ë¸”ë§Œ ì‚¬ìš©
# - í†µí•© í”Œëž«í¼ê³¼ ì™„ì „ ë¶„ë¦¬
# ==============================================
# SOOPNOTE_DB_URL=https://[soopify-project].supabase.co
# SOOPNOTE_DB_ANON_KEY=eyJ...
# (í•„ìš”ì‹œ ë‚˜ì¤‘ì— ì¶”ê°€)
```

### 2ë‹¨ê³„: Supabase í´ë¼ì´ì–¸íŠ¸ ì •ë¦¬ (10ë¶„)

```typescript
// lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

/**
 * ë©”ì¸ í†µí•© í”Œëž«í¼ DB
 * - ì›ëž˜ docnamu í”„ë¡œì íŠ¸
 * - ì»¤ë®¤ë‹ˆí‹°, ì „êµ­ í˜„í™©, ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤
 */
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

export const supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey, {
  auth: {
    autoRefreshToken: false,
    persistSession: false,
  },
})

// íƒ€ìž… ì •ì˜
export type * from './types'
```

### 3ë‹¨ê³„: README ì—…ë°ì´íŠ¸ (5ë¶„)

```markdown
# Soopify - í†µí•© í”Œëž«í¼

## ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ë©”ì¸ DB (docnamu í”„ë¡œì íŠ¸ í™œìš©)
- **ìš©ë„**: soopify.com í†µí•© í”Œëž«í¼
- **í…Œì´ë¸”**:
  - ì»¤ë®¤ë‹ˆí‹° (discussions, qna)
  - ì „êµ­ í˜„í™© (tree_hospitals, protected_trees)
  - ë¹„ì¦ˆë‹ˆìŠ¤ (notices, contact_inquiries)

### ë…¸íŠ¸ DB (soopify í”„ë¡œì íŠ¸ í™œìš©)
- **ìš©ë„**: soopnote.com ë…ë¦½ ì„œë¹„ìŠ¤
- **í…Œì´ë¸”**: sn_* (ëª¨ë“  ë…¸íŠ¸ ê´€ë ¨)
- **ë¶„ë¦¬ ì´ìœ **: í†µí•© í”Œëž«í¼ê³¼ ì™„ì „ ë…ë¦½ ìš´ì˜
```

### 4ë‹¨ê³„: Supabase ëŒ€ì‹œë³´ë“œ í‘œì‹œëª… ë³€ê²½ (1ë¶„)

Supabase ëŒ€ì‹œë³´ë“œì—ì„œ:
1. Organization Settings
2. Project Settings
3. General â†’ Project Name
4. `docnamu` â†’ `Soopify Platform (Main)`
5. `soopify` â†’ `SoopNote App (Separate)`

---

## ðŸ“Š ìˆ˜ì • ë²”ìœ„ ë¹„êµ

### ì˜µì…˜ 1 (Display Nameë§Œ)
```
ìˆ˜ì • íŒŒì¼: 0ê°œ
ìž‘ì—… ì‹œê°„: 1ë¶„
ë¦¬ìŠ¤í¬: ì—†ìŒ
```

### ì˜µì…˜ 2 (ìƒˆ í”„ë¡œì íŠ¸)
```
ìˆ˜ì • íŒŒì¼:
- ëª¨ë“  API íŒŒì¼ (10+ê°œ)
- ëª¨ë“  ì»´í¬ë„ŒíŠ¸ (20+ê°œ)
- í™˜ê²½ë³€ìˆ˜ íŒŒì¼
- Vercel ì„¤ì •
- í…ŒìŠ¤íŠ¸ íŒŒì¼

ìž‘ì—… ì‹œê°„: 2-3ì¼
ë¦¬ìŠ¤í¬: ë†’ìŒ (ë°ì´í„° ì†ì‹¤, ë‹¤ìš´íƒ€ìž„)
```

### ì˜µì…˜ 3 (ë³€ìˆ˜ëª… + ì£¼ì„) â­
```
ìˆ˜ì • íŒŒì¼:
- .env.local (ì£¼ì„ ì¶”ê°€)
- lib/supabase.ts (ì£¼ì„ ì¶”ê°€)
- README.md (ì„¤ëª… ì¶”ê°€)

ìž‘ì—… ì‹œê°„: 30ë¶„
ë¦¬ìŠ¤í¬: ì—†ìŒ
```

---

## âœ… ê²°ë¡  ë° ê¶Œìž¥ì‚¬í•­

### ìµœì¢… ì¶”ì²œ: **ì˜µì…˜ 3**

**ì™œ?**
1. **íš¨ìœ¨ì **: 30ë¶„ì´ë©´ ì™„ë£Œ
2. **ì•ˆì „**: ë°ì´í„° ì†ì‹¤ ìœ„í—˜ 0
3. **ëª…í™•**: ì£¼ì„ìœ¼ë¡œ ìš©ë„ í‘œì‹œ
4. **ì‹¤ìš©ì **: ì‹¤ì œ ë¬¸ì œ í•´ê²°ì— ì§‘ì¤‘

**DB ì´ë¦„ì€ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!**
- ì‚¬ìš©ìžëŠ” Supabase URLì„ ì•ˆ ë´„
- ê°œë°œìžë§Œ ëª…í™•í•˜ë©´ ë¨
- ê¸°ëŠ¥ì´ ì¤‘ìš”, ì´ë¦„ì€ ë¶€ì°¨ì 

### ë¹„ìœ 
```
ì§‘ì£¼ì†Œ(URL)ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ 
ë¬¸íŒ¨(í‘œì‹œëª…)ë§Œ ë°”ê¾¸ê¸°

ì˜ˆ:
- ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ 123ë²ˆì§€ (ê³ ì • URL)
- ë¬¸íŒ¨: "Soopify í†µí•© í”Œëž«í¼" (ë³€ê²½ ê°€ëŠ¥)
```

---

## ðŸš€ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸

```bash
# 1. í™˜ê²½ë³€ìˆ˜ ë°±ì—…
cp .env.local .env.local.backup

# 2. .env.localì— ëª…í™•í•œ ì£¼ì„ ì¶”ê°€
cat >> .env.local << 'EOF'

# ==============================================
# Soopify í†µí•© í”Œëž«í¼ - ë©”ì¸ DB
# (docnamu í”„ë¡œì íŠ¸ â†’ í†µí•© í”Œëž«í¼ìš© ì „í™˜)
# ==============================================
NEXT_PUBLIC_SUPABASE_URL=https://docnamu.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_key_here
EOF

# 3. ì™„ë£Œ!
```

---

## ðŸ’¡ ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### Supabase ìš”ê¸ˆì œ
- Free í”Œëžœ: í”„ë¡œì íŠ¸ 2ê°œê¹Œì§€ ë¬´ë£Œ
- í˜„ìž¬: docnamu + soopify = 2ê°œ (ë¬´ë£Œ ë²”ìœ„)
- ìƒˆë¡œ ë§Œë“¤ë©´: 3ê°œ â†’ ìœ ë£Œ ì „í™˜ í•„ìš”

### ê²°ë¡ 
**êµ³ì´ ì´ë¦„ ë°”ê¿€ í•„ìš” ì—†ìŠµë‹ˆë‹¤!**
- ì£¼ì„ê³¼ ë³€ìˆ˜ëª…ìœ¼ë¡œ ì¶©ë¶„ížˆ ëª…í™•
- ì‹œê°„ê³¼ ë¹„ìš© ì ˆì•½
- ë¦¬ìŠ¤í¬ ì œë¡œ

---

ì–´ë–»ê²Œ í•˜ì‹œê² ì–´ìš”?
- **A**: ì˜µì…˜ 3 (ë³€ìˆ˜ëª… + ì£¼ì„) â­ ì¶”ì²œ
- **B**: ì˜µì…˜ 1 (Display Nameë§Œ)
- **C**: ì˜µì…˜ 2 (ìƒˆ í”„ë¡œì íŠ¸) - ì •ë§ë¡œ?

ì œ ì¶”ì²œì€ **ì˜µì…˜ 3**ìž…ë‹ˆë‹¤!
ì§€ê¸ˆ ë°”ë¡œ 30ë¶„ ì•ˆì— ëë‚¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
